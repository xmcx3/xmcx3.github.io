(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{6313:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/widgets/CodeStastic/CodeStastic",function(){return a(3067)}])},3067:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(5893),n=a(7294),s=a(3920);let l=async()=>{try{let e=await fetch("https://cors-anywhere-63h7.onrender.com/https://leetcode.cn/graphql/noj-go",{method:"POST",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify({query:"\n    query userProfileCalendar($userSlug: String!, $year: Int) {\n      userCalendar(userSlug: $userSlug, year: $year) {\n        submissionCalendar\n      }\n    }\n  ",variables:{userSlug:"xmcccccc"},operationName:"userProfileCalendar"})});return e.json()}catch(e){return{data:{}}}},u=e=>{let t=e.getMonth(),a=e.getYear(),r=e.getFullYear(),n=e.getDay(),s=e.getDate(),l=new Date(r,t,1),u=Math.floor((s+l.getDay()-1)/7);return[(12*a+t)*8+n,u]},i=e=>{let t=e.getFullYear(),a=e.getMonth(),r=e.getDate();return new Date(t,a,r).getTime()};class o{get data(){return Array.from(this.datas.entries()).map(e=>{let[t,a]=e,r=new Date(1e3*parseInt(t));return[...u(r),a]})}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach(e=>{let[t,a]=e,r=new Date(1e3*parseInt(t)),n=Math.floor(i(r)/1e3);this.datas.has(n)&&this.datas.set(n,a)})}get range(){let e=this.data;return{x:{max:s.Fp7(e,e=>e[0]),min:s.VV$(e,e=>e[0])},y:{max:s.Fp7(e,e=>e[1]),min:s.VV$(e,e=>e[1])}}}constructor(e=3){let t=new Date,a=new Date(t.getFullYear(),t.getMonth()+1),r=s.F0B.offset(a,-e),n=s.Nus(r,a);this.datas=new Map(n.map(e=>[Math.floor(i(e)/1e3),0]))}}let c=e=>{let t=(0,n.useRef)(null),[a,r]=(0,n.useState)(null),l=(e.range.x.max+1-e.range.x.min)*20,u=(e.range.y.max+1-e.range.y.min)*20,i=s.q2y().domain(s.w6H(e.range.x.min,e.range.x.max+1)).range([0,l]).padding(1),o=s.q2y().domain(s.w6H(e.range.y.min,e.range.y.max+1)).range([0,u]).padding(1);(0,n.useEffect)(()=>{let e=s.Ys(t.current).append("svg").attr("width",l).attr("height",u).attr("viewBox","0 0 ".concat(l," ").concat(u));return r(e),()=>e.remove()},[]);let c=e=>{let t=s.q$2(s.JHv("#19A7CE","#000000"),4),a=["#F6F1F1",...t],r=Math.ceil(e/5);return a[r>=5?4:r]},d=e=>{null==a||a.selectAll("rect").data(e).join("rect").attr("x",e=>{let[t,a]=e;return i(t)}).attr("y",e=>{let[t,a]=e;return o(a)}).attr("width",12).attr("height",12).attr("rx",2).attr("fill",e=>c(e[2]))};return[a,t,d]},d=e=>{let{month:t=4,className:a}=e,s=(0,n.useMemo)(()=>new o(t),[t]),[u,i,d]=c(s);return(0,n.useEffect)(()=>{let e=async()=>{let{data:{userCalendar:e}}=await l(),{submissionCalendar:t}=e||"",a=void 0===t?[]:JSON.parse(t),r=Object.keys(a).map(e=>[e,a[e]]);s.update(r),d(s.data)};d(s.data),e()},[s.data]),(0,r.jsx)("div",{className:"w-full text-gray flex items-center ".concat(a),ref:i})};var g=d}},function(e){e.O(0,[920,774,888,179],function(){return e(e.s=6313)}),_N_E=e.O()}]);